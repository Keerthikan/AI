#import "map.txt" maps
void chrrepeat(char ch, string &target, const int count) {
  string help = "x"; // x will be replaced
  help[0] = ch;
  for(int i=0; i<count; i++)
    strcat(target, help);
}

task main()
{	
	int diamonds = 0;
	while(true)
	{
		byte handle;
		handle = fopen("map.txt", "r");
		if (handle != NULL)
    		{
      			string width;
			string height;
			string diamod;
			int count = 1;
			char temps[2];
			while(count <= 2)
			{
				temps[count-1] = fgetc(handle); 
				if(!isspace(temps[count-1]))
				{	
					for(int i = 0; i < count ; i++)
					{
						TextOut(0, LCD_LINE1, temps[i]);
						TextOut(0, LCD_LINE2, "break:" + NumToStr(i));
						Wait(1000);
					}
						count++;
				}
				else 
				{
					TextOut(0, LCD_LINE1, "break");
					break;
				}
			}
			
			TextOut(0, LCD_LINE3, "done");
			TextOut(0,LCD_LINE4,temps);	
			//fgets(height, 2, handle);
			//fgets(diamod, 2, handle);
      			//TextOut(0, LCD_LINE1, "width: " + width);
			//TextOut(0, LCD_LINE2, "height: " + height);
			//TextOut(0, LCD_LINE3, "Diamonds: " + diamod);
			Wait(20000);
    		}
		//if(maps != NULL)
		//{
		//	OnRev(OUT_A,75);
		//	Wait(100);
		//}

  		//FileOpenType foArgs;
                //foArgs.Filename = "map.txt";
  		//SysFileOpenRead(foArgs); // open the file for reading
		//string Result = ByteArrayToStr(foArgs);
  		//if (foArgs.Result == NO_ERR) 
		//{
		//	TextOut(0,0,NumToStr(foArgs.Result));
		//	TextOut(0,32,Result);
   		//	OnRev(OUT_A,75);
		//	Wait(100);	 // read data from the file using FileHandle
			
		//}  
		//else
		//{
		//	OnRev(OUT_A,0);
		//}

		//if (foArgs.Result != NO_ERR) 
		//{
		//	TextOut(0,0,NumToStr(foArgs.Result));
   		//	OnRev(OUT_C,75);
		//	Wait(100);	 // read data from the file using FileHandle
		//}  
		//else
		//{
		//	OnRev(OUT_C,0);
		//}
	}
}	
